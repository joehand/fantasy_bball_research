{% extends "frontend/_base.html" %}

{% set num_players = 10 %}

{%- block content -%}
    <h1 class="page-header">Dashboard</h1>

    <div class="row">
        <div class=" col-sm-12">
        <h4>Players (Total: {{data.undraft|length}})</h4>
        <div class="progress">
            <div class="progress-bar progress-bar-danger" style="width: {{data.percent.pg}}%">
                {{data.pg_undraft|length}}
            </div>
            <div class="progress-bar progress-bar-primary" style="width: {{data.percent.sg}}%">
                {{data.sg_undraft|length}}
            </div>
            <div class="progress-bar progress-bar-success" style="width: {{data.percent.sf}}%">
                {{data.sf_undraft|length}}
            </div>
            <div class="progress-bar progress-bar-info" style="width: {{data.percent.pf}}%">
                {{data.pf_undraft|length}}
            </div>
            <div class="progress-bar progress-bar-warning" style="width: {{data.percent.c}}%">
                {{data.c_undraft|length}}
            </div>
        </div>
        </div>
        {% for cat, val in data.zscores_per.items() %}
        <div class=" col-sm-4">
        <div class="progress">
          <div class="progress-bar progress-bar-striped" role="progressbar" style="width: {{val}}%;">
              {{cat}}
          </div>
        </div>
        </div>
        {% endfor %}
    </div>

    <div class="row ">
        <hr>
    </div>
    <div class="row ">
        <div class="col-sm-4">
          <h5>Current $/Total Z Score</h5>
          <span class="text-muted">${{stats.dollars_tot_zscore|round(2)}}</span>
          <h5>Current. $/Joe Z-Score</h5>
          <span class="text-muted">${{stats.dollars_big_zscore|round(2)}}</span>
            <h5>Projected $/Total Z Score</h5>
            <span class="text-muted">${{stats.proj_dollars_tot_zscore|round(2)}}</span>
            <h5>Projected. $/Joe Z-Score</h5>
            <span class="text-muted">${{stats.proj_dollars_big_zscore|round(2)}}</span>
        </div>
          <div class="col-sm-4">
            <h4>Top {{num_players}} Players</h4>
            {% for player in data['undraft'][:num_players] %}
                <div class="row">
                  <span class="col-sm-1">{{player.rank}}:</span>
                  <span class="col-sm-8">{% include 'partials/_player.html' %}
                      <span class="text-muted">(${{player.proj_cost_tot}})</span>
                  </span>
                  {%set extra_pos_class="col-sm-2"%}
                  {% include 'partials/_pos_label.html' %}
                </div>
            {% endfor %}
          </div>
        <div class="col-sm-4">
          <h4>Top {{num_players}} Players (Joe)</h4>
          {% for player in data['undraft'].order_by('rank_big')[:num_players] %}
              <div class="row">
                <span class="col-sm-1">{{player.rank_big}}:</span>
                <span class="col-sm-8">{% include 'partials/_player.html' %}
                    <span class="text-muted">(${{player.proj_cost_big}})</span>
                </span>
                {%set extra_pos_class="col-sm-2"%}
                {% include 'partials/_pos_label.html' %}
              </div>
          {% endfor %}
        </div>
    </div>

    <div class="row ">
        <hr>
    </div>

    <div class="row panel panel-default">
        <!-- Default panel contents -->
        <div class="panel-heading">Top Players By Position (Total Z Score)</div>
        <div class="panel-body">
            <div class="col-sm-4">
              <h4>Top {{num_players}} PG/SG</h4>
                  {% for player in data['undraft'].filter(pos__contains='G')[:num_players] %}
                      <div class="row">
                        <span class="col-sm-1">{{player.rank}}:</span>
                        <span class="col-sm-8">{% include 'partials/_player.html' %}
                            <span class="text-muted">(${{player.proj_cost_tot}})</span>
                        </span>
                        {%set extra_pos_class="col-sm-2"%}
                        {% include 'partials/_pos_label.html' %}
                      </div>
                  {% endfor %}
            </div>

            <div class="col-sm-4">
              <h4>Top {{num_players}} SG/SF</h4>
                  {% for player in data['undraft'].filter(pos__contains='S')[:num_players] %}
                      <div class="row">
                        <span class="col-sm-1">{{player.rank}}:</span>
                        <span class="col-sm-8">{% include 'partials/_player.html' %}
                            <span class="text-muted">(${{player.proj_cost_tot}})</span>
                        </span>
                        {%set extra_pos_class="col-sm-2"%}
                        {% include 'partials/_pos_label.html' %}
                      </div>
                  {% endfor %}
            </div>

            <div class="col-sm-4">
              <h4>Top {{num_players}} PF/C</h4>
                  {% for player in data['undraft_bigs'][:num_players] %}
                      <div class="row">
                        <span class="col-sm-1">{{player.rank}}:</span>
                        <span class="col-sm-8">{% include 'partials/_player.html' %}
                            <span class="text-muted">(${{player.proj_cost_tot}})</span>
                        </span>
                        {%set extra_pos_class="col-sm-2"%}
                        {% include 'partials/_pos_label.html' %}
                      </div>
                  {% endfor %}
            </div>
        </div>
    </div>
    <div class="row ">
        <hr>
    </div>

    <div class="row panel panel-default">
        <!-- Default panel contents -->
        <div class="panel-heading">Top Players By Position (Joe Z Score)</div>
        <div class="panel-body">
            <div class="col-sm-4">
              <h4>Top {{num_players}} PG/SG</h4>
                  {% for player in data['undraft'].order_by('rank_big').filter(pos__contains='G')[:num_players] %}
                      <div class="row">
                        <span class="col-sm-1">{{player.rank_big}}:</span>
                        <span class="col-sm-8">{% include 'partials/_player.html' %}
                            <span class="text-muted">(${{player.proj_cost_big}})</span>
                        </span>
                        {%set extra_pos_class="col-sm-2"%}
                        {% include 'partials/_pos_label.html' %}
                      </div>
                  {% endfor %}
            </div>

            <div class="col-sm-4">
              <h4>Top {{num_players}} SG/SF</h4>
                  {% for player in data['undraft'].order_by('rank_big').filter(pos__contains='S')[:num_players] %}
                      <div class="row">
                        <span class="col-sm-1">{{player.rank_big}}:</span>
                        <span class="col-sm-8">{% include 'partials/_player.html' %}
                            <span class="text-muted">(${{player.proj_cost_big}})</span>
                        </span>
                        {%set extra_pos_class="col-sm-2"%}
                        {% include 'partials/_pos_label.html' %}
                      </div>
                  {% endfor %}
            </div>

            <div class="col-sm-4">
              <h4>Top {{num_players}} PF/C</h4>
                  {% for player in data['undraft_bigs_big'][:num_players] %}
                      <div class="row">
                        <span class="col-sm-1">{{player.rank_big}}:</span>
                        <span class="col-sm-8">{% include 'partials/_player.html' %}
                            <span class="text-muted">(${{player.proj_cost_big}})</span>
                        </span>
                        {%set extra_pos_class="col-sm-2"%}
                        {% include 'partials/_pos_label.html' %}
                      </div>
                  {% endfor %}
            </div>
        </div>
    </div>

{%- endblock -%}
